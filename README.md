ä¸€ä¸ªä¸“æ³¨äºå¤šæ¨¡æ€å¤§æ¨¡å‹å’Œäººå·¥æ™ºèƒ½æŠ€æœ¯çš„ä¸ªäººåšå®¢ï¼Œé‡‡ç”¨æç®€ä¸»ä¹‰è®¾è®¡é£æ ¼ï¼Œå†…å®¹ä¼˜å…ˆçš„ç”¨æˆ·ä½“éªŒã€‚

## âœ¨ ç‰¹æ€§

  - ğŸ¨ **æç®€ä¸»ä¹‰è®¾è®¡** - é‡‡ç”¨æ·±è‰²ä¸»é¢˜ï¼Œæ¸…æ™°çš„è§†è§‰å±‚æ¬¡ã€‚
  - ğŸ“± **å“åº”å¼å¸ƒå±€** - å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ã€‚
  - âš¡ **é«˜æ€§èƒ½** - é€šè¿‡ Tailwind CSS æ„å»ºï¼Œæœ€ç»ˆåªåŒ…å«ç”¨åˆ°çš„æ ·å¼ï¼Œæ–‡ä»¶ä½“ç§¯å°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ã€‚
  - ğŸ¯ **å†…å®¹ä¼˜å…ˆ** - ä¸“æ³¨äºé˜…è¯»ä½“éªŒï¼Œå‡å°‘å¹²æ‰°ã€‚
  - ğŸ”§ **æ˜“äºç»´æŠ¤** - ç®€å•çš„æ–‡ä»¶ç»“æ„ï¼Œæ˜“äºæ›´æ–°å†…å®¹ã€‚
  - ğŸ³ **Dockeréƒ¨ç½²** - å®Œæ•´çš„å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

  - **å‰ç«¯**: HTML5, CSS3, JavaScript (ES6+)
  - **æ ·å¼æ¡†æ¶**: Tailwind CSS (é€šè¿‡ PostCSS æ„å»º)
  - **å¼€å‘ç¯å¢ƒ**: Node.js
  - **WebæœåŠ¡å™¨**: Nginx
  - **å®¹å™¨åŒ–**: Docker & Docker Compose

## ğŸš€ æœ¬åœ°å¼€å‘ä¸éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°†å¼•å¯¼ä½ å®Œæˆä»ç¯å¢ƒé…ç½®åˆ°é¡¹ç›®éƒ¨ç½²çš„å®Œæ•´æµç¨‹ã€‚

### acme.sh å®‰è£…ä¸ä½¿ç”¨å®Œæ•´å‘½ä»¤æŒ‡å—

**ç›®æ ‡**ï¼šä½¿ç”¨ `acme.sh` é€šè¿‡ Cloudflare çš„ DNS APIï¼Œä¸ºæ‚¨çš„åŸŸåç”³è¯·ä¸€å¼ é€šé…ç¬¦è¯ä¹¦ï¼Œå¹¶å°†å…¶å®‰è£…åˆ°æŒ‡å®šç›®å½•ï¼ŒåŒæ—¶é…ç½®å¥½å…¨è‡ªåŠ¨ç»­ç­¾ã€‚

#### å‰æ

  * æ‚¨å·²ç»æ‹¥æœ‰ä¸€ä¸ª Cloudflare è´¦æˆ·å’Œä¸€ä¸ªåŸŸåã€‚
  * æ‚¨å·²ç»æŒ‰ç…§ä¹‹å‰çš„æ­¥éª¤ï¼Œåœ¨ Cloudflare ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæœ‰ `DNS:Edit` æƒé™çš„ API ä»¤ç‰Œï¼ˆTokenï¼‰ã€‚
  * æ‚¨ä»¥ä¸€ä¸ªæ™®é€šç”¨æˆ·ï¼ˆä¾‹å¦‚ `ubuntu`ï¼‰é€šè¿‡ SSH ç™»å½•åˆ°æ‚¨çš„æœåŠ¡å™¨ã€‚

-----

### ç¬¬ 1 æ­¥ï¼šå®‰è£… acme.sh

æ‰§è¡Œå®˜æ–¹å®‰è£…å‘½ä»¤ï¼Œå°† `your_email@example.com` æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„çœŸå®é‚®ç®±ã€‚

```bash
curl https://get.acme.sh | sh -s email=your_email@example.com
```

  * **ä½œç”¨**ï¼šä¸‹è½½å¹¶å®‰è£… `acme.sh` åˆ°æ‚¨å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹ (`/home/ubuntu/.acme.sh/`)ï¼Œå¹¶è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç”¨äºç»­ç­¾çš„å®šæ—¶ä»»åŠ¡ã€‚

-----

### ç¬¬ 2 æ­¥ï¼šé…ç½® Cloudflare API å‡­è¯

æ‰§è¡Œ `export` å‘½ä»¤ï¼Œå°†ã€æ‚¨çš„Cloudflare APIä»¤ç‰Œã€‘æ›¿æ¢ä¸ºæ‚¨ä¿å­˜çš„çœŸå®ä»¤ç‰Œå­—ç¬¦ä¸²ã€‚

```bash
export CF_Token="ã€æ‚¨çš„Cloudflare APIä»¤ç‰Œã€‘"
```

  * **ä½œç”¨**ï¼šåœ¨å½“å‰ç»ˆç«¯ä¼šè¯ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè®© `acme.sh` çŸ¥é“å¦‚ä½•ç™»å½• Cloudflareã€‚
  * **æ³¨æ„**ï¼šæ­¤å‘½ä»¤ä»…åœ¨å½“å‰çª—å£æœ‰æ•ˆï¼Œå…³é—­åä¼šå¤±æ•ˆã€‚ä½† `acme.sh` åœ¨æˆåŠŸæ‰§è¡Œä¸€æ¬¡åï¼Œä¼šå°†å‡­è¯åŠ å¯†ä¿å­˜åœ¨å…¶é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾›å°†æ¥è‡ªåŠ¨ç»­ç­¾ä½¿ç”¨ã€‚

-----

### ç¬¬ 3 æ­¥ï¼šè®¾ç½®é»˜è®¤è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰

ä¸ºäº†é¿å…é‡åˆ°é€Ÿç‡é™åˆ¶æˆ–é»˜è®¤ CA çš„é—®é¢˜ï¼Œå»ºè®®æ˜ç¡®æŒ‡å®šä½¿ç”¨ Let's Encryptã€‚

```bash
é»˜è®¤æ˜¯ZeroSSL
/home/ubuntu/.acme.sh/acme.sh --set-default-ca --server zerossl
ä¹Ÿå¯ä»¥è½¬æ¢åˆ°letsencrypt
/home/ubuntu/.acme.sh/acme.sh --set-default-ca --server letsencrypt
```

-----

### ç¬¬ 4 æ­¥ï¼šç­¾å‘è¯ä¹¦

ä½¿ç”¨ `acme.sh` çš„å®Œæ•´è·¯å¾„æ¥æ‰§è¡Œç­¾å‘å‘½ä»¤ã€‚å°† `your_domain.com` æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„åŸŸåã€‚

```bash
/home/ubuntu/.acme.sh/acme.sh --issue --dns dns_cf -d your_domain.com -d '*.your_domain.com' --ecc
```

  * **`--issue`**: ç­¾å‘æ“ä½œã€‚
  * **`--dns dns_cf`**: æŒ‡å®šä½¿ç”¨ Cloudflare DNS è¿›è¡ŒéªŒè¯ã€‚
  * **`-d your_domain.com`**: ä¸ºä¸»åŸŸåç”³è¯·ã€‚
  * **`-d '*.your_domain.com'`**: ä¸ºæ‰€æœ‰å­åŸŸåç”³è¯·é€šé…ç¬¦è¯ä¹¦ã€‚
  * **`--ecc`**: ç”³è¯· ECC è¯ä¹¦ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥å»æ‰ã€‚

-----

### ç¬¬ 5 æ­¥ï¼šå®‰è£…è¯ä¹¦åˆ°æŒ‡å®šç›®å½•ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰

è¿™æ˜¯å°†è¯ä¹¦éƒ¨ç½²åˆ°åº”ç”¨ï¼ˆå¦‚ Xrayï¼‰å¹¶é…ç½®è‡ªåŠ¨åŒ–çš„å…³é”®ä¸€æ­¥ã€‚

```bash
# 1. åˆ›å»ºç”¨äºå­˜æ”¾è¯ä¹¦çš„ç›®å½• (å¦‚æœè¿˜æ²¡åˆ›å»º)
sudo mkdir -p /etc/app/certs

# 2. æ‰§è¡Œå®‰è£…å‘½ä»¤
æ–°å»ºæ–‡ä»¶
vim /home/ubuntu/app/reload_services.sh
æ–‡ä»¶å†…å®¹
#!/bin/bash
# 3. é‡å¯ kcnet-blog é¡¹ç›®çš„ web æœåŠ¡
echo "Reloading kcnet-blog..."
docker compose -f /home/ubuntu/app/kcnet-blog/docker-compose.yml restart web
# 4. å¦‚æœè¿˜æœ‰å…¶ä»–é¡¹ç›®ï¼Œç»§ç»­åœ¨ä¸‹é¢æ·»åŠ 
# echo "Reloading project-three..."
# docker compose -f /path/to/project-three/docker-compose.yml restart service-name
echo "All services reloaded."

#å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„ï¼Œéœ€é‡æ–°è¿æ¥SSHä¼šè¯ç”Ÿæ•ˆ
sudo usermod -aG docker ubuntu 

# 5. å®‰è£…
sudo /home/ubuntu/.acme.sh/acme.sh --install-cert -d your_domain.com --ecc \
--key-file       /etc/app/certs/private.key  \
--fullchain-file /etc/app/certs/certificate.crt \
--reloadcmd      "/home/ubuntu/app/reload_services.sh"
```

  * **`sudo /home/ubuntu/.acme.sh/acme.sh`**: ä½¿ç”¨ `sudo` é…åˆå®Œæ•´è·¯å¾„ï¼Œè§£å†³æƒé™é—®é¢˜ã€‚
  * **`--install-cert -d your_domain.com`**: æŒ‡å®šä¸ºå“ªä¸ªåŸŸåå®‰è£…è¯ä¹¦ã€‚
  * **`--key-file` å’Œ `--fullchain-file`**: æŒ‡å®šè¯ä¹¦ç§é’¥å’Œå…¬é’¥çš„æœ€ç»ˆå­˜æ”¾è·¯å¾„ã€‚
  * **`--reloadcmd "..."`**: **è‡ªåŠ¨åŒ–æ ¸å¿ƒ**ã€‚åœ¨æœªæ¥æ¯æ¬¡è‡ªåŠ¨ç»­ç­¾æˆåŠŸåï¼Œ`acme.sh` éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™æ¡å‘½ä»¤ï¼Œæ¥é‡å¯æ‚¨çš„æœåŠ¡ä»¥åŠ è½½æ–°è¯ä¹¦ã€‚è¯·ç¡®ä¿ `docker-compose.yml` çš„è·¯å¾„æ˜¯æ­£ç¡®çš„ã€‚

-----

### ç¬¬ 6 æ­¥ï¼š(å¯é€‰ï¼Œä¸ºæ–¹ä¾¿) æ·»åŠ åˆ«å

å¦‚æœæ‚¨è§‰å¾—æ¯æ¬¡éƒ½è¾“å…¥å®Œæ•´è·¯å¾„å¾ˆéº»çƒ¦ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸º `acme.sh` åˆ›å»ºä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚

```bash
echo 'alias acme.sh=/home/ubuntu/.acme.sh/acme.sh' >> ~/.bashrc && source ~/.bashrc
```

æ‰§è¡Œåï¼Œæ‚¨å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ç›´æ¥ä½¿ç”¨ `acme.sh` å‘½ä»¤äº†ã€‚

### ç¬¬1æ­¥ï¼šç¯å¢ƒå‡†å¤‡ (Prerequisites)

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿ (å¦‚ Ubuntu) å·²å®‰è£… `git`ã€‚ç„¶åï¼Œä½ éœ€è¦å®‰è£…ä¸€ä¸ªç¨³å®šç‰ˆæœ¬çš„ Node.js å’Œ npmã€‚

1.  **å…‹éš†é¡¹ç›®**

    ```bash
    git clone https://github.com/your-username/kcnet-blog.git
    cd kcnet-blog
    ```

2.  **å®‰è£… Node.js (æ¨è)**
    å¦‚æœä½ çš„ `npm` æˆ– `npx` å‘½ä»¤é‡åˆ°é—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä» NodeSource å®‰è£…ä¸€ä¸ªæœ€æ–°çš„é•¿æœŸæ”¯æŒç‰ˆ (LTS)ã€‚è¿™èƒ½ä»æ ¹æºä¸Šé¿å…å¾ˆå¤šç¯å¢ƒé—®é¢˜ã€‚

    ```bash
    # (å¯é€‰ï¼Œä½†æ¨è) å¸è½½ç³»ç»Ÿè‡ªå¸¦çš„æ—§ç‰ˆæœ¬
    sudo apt-get purge nodejs npm -y
    sudo apt-get autoremove -y

    # ä» NodeSource å®‰è£… Node.js v20.x LTS
    curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
    sudo apt-get install -y nodejs
    ```

### ç¬¬2æ­¥ï¼šå®‰è£…é¡¹ç›®ä¾èµ–

ä½¿ç”¨ `npm` å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰å¼€å‘å·¥å…·ï¼Œå¦‚ `tailwindcss`, `postcss` ç­‰ã€‚

```bash
npm install
```

### ç¬¬3æ­¥ï¼šé…ç½®ä¸æ„å»º

1.  **åˆå§‹åŒ– Tailwind CSS**
    å¦‚æœé¡¹ç›®æ˜¯é¦–æ¬¡é…ç½®ï¼Œè¿è¡Œæ­¤å‘½ä»¤æ¥ç”Ÿæˆ `tailwind.config.js` å’Œ `postcss.config.js` é…ç½®æ–‡ä»¶ã€‚

    ```bash
    npx tailwindcss init -p
    ```

2.  **é…ç½® Tailwind æ‰«æè·¯å¾„**
    ç¼–è¾‘ `tailwind.config.js` æ–‡ä»¶ï¼Œåœ¨ `content` æ•°ç»„ä¸­æŒ‡å®šä½ çš„ HTML æ–‡ä»¶è·¯å¾„ï¼Œä»¥ä¾¿ Tailwind èƒ½æ‰¾åˆ°æ‰€æœ‰ç”¨åˆ°çš„æ ·å¼ç±»ã€‚

    ```javascript
    content: ["./dist/**/*.{html,js}"],
    ```

3.  **æ„å»º CSS**
    è¿è¡Œ `build` å‘½ä»¤ã€‚å®ƒä¼šè¯»å– `src/input.css`ï¼Œæ‰«æ `dist/` ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªç»è¿‡å‹ç¼©ä¼˜åŒ–çš„æœ€ç»ˆ CSS æ–‡ä»¶åˆ° `dist/assets/css/style.css`ã€‚

    ```bash
    npm run build
    ```

    **é‡è¦æç¤º**: æ¯æ¬¡ä¿®æ”¹äº† HTML æ–‡ä»¶ä¸­çš„æ ·å¼ç±»åï¼Œéƒ½éœ€è¦é‡æ–°è¿è¡Œæ­¤å‘½ä»¤æ¥æ›´æ–° CSS æ–‡ä»¶ã€‚

### ç¬¬4æ­¥ï¼šDocker éƒ¨ç½²

é¡¹ç›®å·²é…ç½®ä¸ºé€šè¿‡ Docker éƒ¨ç½²ã€‚

1.  **æ„å»ºå¹¶å¯åŠ¨å®¹å™¨**
    æ­¤å‘½ä»¤ä¼šåœ¨åå°æ„å»º Docker é•œåƒå¹¶å¯åŠ¨ Nginx æœåŠ¡ã€‚

    ```bash
    sudo docker compose down --volumes
    sudo docker system prune -af
    sudo docker compose up --build -d
    ```

2.  **æŸ¥çœ‹æ—¥å¿—**
    ä½ å¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤æ¥ç›‘æ§æœåŠ¡çš„è¿è¡Œæ—¥å¿—ã€‚

    ```bash
    docker compose logs -f
    ```

## ğŸ“ è”ç³»æ–¹å¼

  - **GitHub**: [@kcnet](https://github.com/hejie)
  - **Email**: kc.cn.com@gmail.com

-----

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼
